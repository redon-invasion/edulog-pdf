<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Test Parameter Eingabe</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 30px;
    max-width: 900px;
  }
  h1 { margin-bottom: 20px; }
  form div { margin-bottom: 12px; }
  label {
    display: inline-block;
    width: 220px;
    font-weight: bold;
    vertical-align: top;
  }
  input, select { padding: 4px; font-size: 14px; }
  input[type="color"] { width: 50px; padding: 0; border: none; }
  button { margin-top: 15px; padding: 8px 14px; font-size: 15px; cursor: pointer; }

  /* --- Section boxes --- */
  fieldset {
    border: 2px solid #ccc;
    border-radius: 8px;
    margin-bottom: 25px;
    padding: 15px 20px;
  }
  fieldset legend {
    font-weight: bold;
    font-size: 16px;
    padding: 0 8px;
    color: #333;
  }

  /* --- Simple WYSIWYG editor --- */
  .editor-toolbar button {
    margin-right: 5px;
    padding: 4px 8px;
    font-size: 13px;
  }
  .editor {
    border: 1px solid #ccc;
    min-height: 120px;
    padding: 8px;
    margin-top: 5px;
    background: #fff;
  }
</style>
</head>
<body>
  <h1>Test Eingabe f√ºr Index.html</h1>
  <form id="paramForm">

    <!-- HEADER SECTION -->
    <fieldset>
      <legend>üü¶ Header / Basisdaten</legend>
      <div><label>Name:</label><input type="text" name="name" value="Vorname Nachname"></div>
      <div><label>Muttersprache:</label><input type="text" name="lang" value="Deutsch"></div>
      <div><label>Geburtsdatum:</label><input type="date" name="birthdate" value="2019-09-01"></div>
      <div><label>Alter:</label><input type="text" name="age" value="6;0"></div>
      <div><label>In D/A/CH seit:</label><input type="date" name="since" value="2023-01-01"></div>
      <div><label>Datum:</label><input type="date" name="date" value="2025-09-15"></div>
      <div><label>Teacher:</label><input type="text" name="teacher" value="Max Mustermann"></div>

      <div><label>Score:</label><input type="number" name="score" value="4"></div>
      <div><label>Min:</label><input type="number" name="min" value="0"></div>
      <div><label>Max:</label><input type="number" name="max" value="13"></div>
    </fieldset>

    <!-- CONTENT SECTION -->
    <fieldset>
      <legend>üü© Content / Testwerte</legend>
      <p><b>Farben f√ºr 4√ó4 Grid w√§hlen:</b></p>

      <!-- Row 1 -->
      <div><label>c1 (Identifikationsstufe):</label>
        <select name="c1Color"><option value="">Keine</option><option value="red">Rot</option><option value="green">Gr√ºn</option></select></div>
      <div><label>c2 (2 Items):</label>
        <select name="c2Color"><option value="">Keine</option><option value="red">Rot</option><option value="green">Gr√ºn</option></select></div>
      <div><label>c3 (Versuch 1):</label>
        <select name="c3Color"><option value="">Keine</option><option value="red">Rot</option><option value="green">Gr√ºn</option></select></div>
      <div><label>c4 (Versuch 2):</label>
        <select name="c4Color"><option value="">Keine</option><option value="red">Rot</option><option value="green">Gr√ºn</option></select></div>

      <!-- Row 2 -->
      <div><label>c5 (Vor√ºbung):</label>
        <select name="c5Color"><option value="">Keine</option><option value="red">Rot</option><option value="green">Gr√ºn</option></select></div>
      <div><label>c6 (3 Items):</label>
        <select name="c6Color"><option value="">Keine</option><option value="red">Rot</option><option value="green">Gr√ºn</option></select></div>
      <div><label>c7 (Versuch 1):</label>
        <select name="c7Color"><option value="">Keine</option><option value="red">Rot</option><option value="green">Gr√ºn</option></select></div>
      <div><label>c8 (Versuch 2):</label>
        <select name="c8Color"><option value="">Keine</option><option value="red">Rot</option><option value="green">Gr√ºn</option></select></div>

      <!-- Row 3 -->
      <div><label>c9:</label>
        <select name="c9Color"><option value="">Keine</option><option value="red">Rot</option><option value="green">Gr√ºn</option></select></div>
      <div><label>c10 (4 Items):</label>
        <select name="c10Color"><option value="">Keine</option><option value="red">Rot</option><option value="green">Gr√ºn</option></select></div>
      <div><label>c11 (Versuch 1):</label>
        <select name="c11Color"><option value="">Keine</option><option value="red">Rot</option><option value="green">Gr√ºn</option></select></div>
      <div><label>c12 (Versuch 2):</label>
        <select name="c12Color"><option value="">Keine</option><option value="red">Rot</option><option value="green">Gr√ºn</option></select></div>

      <!-- Row 4 -->
      <div><label>c13:</label>
        <select name="c13Color"><option value="">Keine</option><option value="red">Rot</option><option value="green">Gr√ºn</option></select></div>
      <div><label>c14:</label>
        <select name="c14Color"><option value="">Keine</option><option value="red">Rot</option><option value="green">Gr√ºn</option></select></div>
      <div><label>c15:</label>
        <select name="c15Color"><option value="">Keine</option><option value="red">Rot</option><option value="green">Gr√ºn</option></select></div>
      <div><label>c16:</label>
        <select name="c16Color"><option value="">Keine</option><option value="red">Rot</option><option value="green">Gr√ºn</option></select></div>
    </fieldset>

    <!-- FOOTER SECTION -->
    <fieldset>
      <legend>üü® Footer / Zus√§tze</legend>

      <!-- WYSIWYG Editor for Beurteilung -->
      <div>
        <label>Beurteilung:</label><br>
        <div class="editor-toolbar">
          <button type="button" onclick="formatText('bold')"><b>B</b></button>
          <button type="button" onclick="formatText('italic')"><i>I</i></button>
          <button type="button" onclick="formatText('increaseFontSize')">A+</button>
          <button type="button" onclick="formatText('decreaseFontSize')">A-</button>
          <button type="button" onclick="formatText('foreColor','red')">Rot</button>
          <button type="button" onclick="formatText('foreColor','blue')">Blau</button>
          <button type="button" onclick="formatText('justifyLeft')">Links</button>
          <button type="button" onclick="formatText('justifyCenter')">Zentriert</button>
          <button type="button" onclick="formatText('justifyRight')">Rechts</button>
        </div>
        <div id="assessmentEditor" class="editor" contenteditable="true">
          Die Differenzierungsleistung ist deutlich auff√§llig, was sich auf die schulischen Lernprozesse auswirken k√∂nnte.
        </div>
      </div>

      <div><label>Label 1:</label><input type="text" name="label1" value="stark auff√§llig"></div>
      <div><label>Label 2:</label><input type="text" name="label2" value="auff√§llig"></div>
      <div><label>Label 3:</label><input type="text" name="label3" value="unauff√§llig"></div>
      <div><label>Label 4:</label><input type="text" name="label4" value="besonders unauff√§llig"></div>

      <div><label>Subsplit (%):</label><input type="range" name="subsplit" min="10" max="90" value="50"></div>
      <div><label>Sub Gray Text:</label><input type="text" name="subgray" value="Weiterf√ºhrende Fachdiagnostik empfohlen"></div>
      <div><label>Sub Green Text:</label><input type="text" name="subgreen" value="Normbereich"></div>

      <div><label>Colors:</label>
        <input type="color" name="colors" value="#ed1b06">
        <input type="color" name="colors" value="#ff7801">
        <input type="color" name="colors" value="#fcc709">
        <input type="color" name="colors" value="#fff15e">
        <input type="color" name="colors" value="#c1ef4a">
        <input type="color" name="colors" value="#79e607">
      </div>

      <div><label>Ranges (comma-separated):</label>
        <input type="text" name="ranges" value="0-3,4-5,6,7-8,9-10,11">
      </div>
    </fieldset>

    <button type="submit">Anzeigen</button>
  </form>

 <script>
  function formatText(command, value=null) {
    if (command === "increaseFontSize" || command === "decreaseFontSize") {
      document.execCommand("fontSize", false, 4);
      let editor = document.getElementById("assessmentEditor");
      let fonts = editor.querySelectorAll("font[size='4']");
      fonts.forEach(f => {
        f.removeAttribute("size");
        let current = parseInt(f.style.fontSize || "16");
        f.style.fontSize = (command === "increaseFontSize" ? current+2 : current-2) + "px";
      });
    } else {
      document.execCommand(command, false, value);
    }
  }

  document.getElementById("paramForm").addEventListener("submit", function(e){
    e.preventDefault();
    const formData = new FormData(e.target);
    const params = new URLSearchParams();

    // --- handle multiple colors for bar ---
    const colorInputs = e.target.querySelectorAll("input[name='colors']");
    const colors = Array.from(colorInputs).map(inp=>inp.value).join(",");
    params.set("colors", colors);

    // --- handle cellColors (grid 4x4) ---
    let cellColors = [];
    for (let i = 1; i <= 16; i++) {
      let val = formData.get("c"+i+"Color");
      if (val === "red") val = "#ffcccc";   // light red
      if (val === "green") val = "#ccffcc"; // light green
      if (val === "") val = "";             // no color
      cellColors.push(val);
      formData.delete("c"+i+"Color");       // remove individual keys
    }
    params.set("cellColors", cellColors.join(","));

    // --- editor content as raw HTML ---
    const assessmentHtml = document.getElementById("assessmentEditor").innerHTML;
    params.set("assessment", assessmentHtml);

    // --- add all remaining fields ---
    for (const [key, value] of formData.entries()) {
      if (key !== "colors") params.set(key, value);
    }

    // redirect
    window.location.href = "aMerkfaehigkeit.html?" + params.toString();
  });
</script>

</body>
</html>
