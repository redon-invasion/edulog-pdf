<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Test Parameter Eingabe</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 30px;
    max-width: 900px;
  }
  h1 {
    margin-bottom: 20px;
  }
  form div {
    margin-bottom: 12px;
  }
  label {
    display: inline-block;
    width: 220px;
    font-weight: bold;
    vertical-align: top;
  }
  input, select {
    padding: 4px;
    font-size: 14px;
  }
  input[type="color"] {
    width: 50px;
    padding: 0;
    border: none;
  }
  button {
    margin-top: 15px;
    padding: 8px 14px;
    font-size: 15px;
    cursor: pointer;
  }

  fieldset {
    border: 2px solid #ccc;
    border-radius: 8px;
    margin-bottom: 25px;
    padding: 15px 20px;
  }
  fieldset legend {
    font-weight: bold;
    font-size: 16px;
    padding: 0 8px;
    color: #333;
  }

  .editor-toolbar button {
    margin-right: 5px;
    padding: 4px 8px;
    font-size: 13px;
  }
  .editor {
    border: 1px solid #ccc;
    min-height: 120px;
    padding: 8px;
    margin-top: 5px;
    background: #fff;
  }
</style>
</head>
<body>
  <h1>Test Eingabe fÃ¼r Index.html</h1>
  <form id="paramForm">

    <!-- HEADER SECTION -->
    <fieldset>
      <legend>ðŸŸ¦ Header / Basisdaten</legend>
      <div><label>Name:</label><input type="text" name="name" value="Vorname Nachname"></div>
      <div><label>Muttersprache:</label><input type="text" name="lang" value="Deutsch"></div>
      <div><label>Geburtsdatum:</label><input type="date" name="birthdate" value="2019-09-01"></div>
      <div><label>Alter:</label><input type="text" name="age" value="6;0"></div>
      <div><label>In D/A/CH seit:</label><input type="date" name="since" value="2023-01-01"></div>
      <div><label>Datum:</label><input type="date" name="date" value="2025-09-15"></div>
      <div><label>Teacher:</label><input type="text" name="teacher" value="Max Mustermann"></div>

      <div><label>Score:</label><input type="number" name="score" value="4"></div>
      <div><label>Min:</label><input type="number" name="min" value="0"></div>
      <div><label>Max:</label><input type="number" name="max" value="13"></div>
    </fieldset>

  <!-- DETAILAUSWERTUNG SECTION -->
    <fieldset>
      <legend>ðŸŸ© Detailauswertung / Formen</legend>

      <div>
        <label>Kreis Text:</label>
        <input type="text" name="kreisText" value="Konnte nicht benannt werden">
        <label>Kreis Farbe:</label>
        <input type="color" name="kreisColor" value="#ff0000">
      </div>

      <div>
        <label>Dreieck Text:</label>
        <input type="text" name="dreieckText" value="Richtig benannt">
        <label>Dreieck Farbe:</label>
        <input type="color" name="dreieckColor" value="#00ff00">
      </div>

      <div>
        <label>Viereck Text:</label>
        <input type="text" name="viereckText" value="Richtig benannt">
        <label>Viereck Farbe:</label>
        <input type="color" name="viereckColor" value="#0000ff">
      </div>

      <hr>
      <div>
        <label>Raupe Text:</label>
        <input type="text" name="raupeText" value="Die Reihe konnte nicht gebildet werden.">
      </div>
      <div>
        <label>Schlange Text:</label>
        <input type="text" name="schlangeText" value="Reihe konnte in Form und Farbe nicht korrekt gebildet werden.">
      </div>
      <div>
        <label>WÃ¼rfel Text:</label>
        <input type="text" name="wuerfelText" value="Die Reihe konnte nicht korrekt gebildet werden (mangelndes Zahlen-, bzw. SymbolverstÃ¤ndnis).">
      </div>
    </fieldset>

    <!-- FOOTER SECTION -->
    <fieldset>
      <legend>ðŸŸ¨ Footer / ZusÃ¤tze</legend>

      <div>
        <label>Beurteilung:</label><br>
        <div class="editor-toolbar">
          <button type="button" onclick="formatText('bold')"><b>B</b></button>
          <button type="button" onclick="formatText('italic')"><i>I</i></button>
          <button type="button" onclick="formatText('increaseFontSize')">A+</button>
          <button type="button" onclick="formatText('decreaseFontSize')">A-</button>
          <button type="button" onclick="formatText('foreColor','red')">Rot</button>
          <button type="button" onclick="formatText('foreColor','blue')">Blau</button>
          <button type="button" onclick="formatText('justifyLeft')">Links</button>
          <button type="button" onclick="formatText('justifyCenter')">Zentriert</button>
          <button type="button" onclick="formatText('justifyRight')">Rechts</button>
        </div>
        <div id="assessmentEditor" class="editor" contenteditable="true">
          Die Differenzierungsleistung ist deutlich auffÃ¤llig, was sich auf die schulischen Lernprozesse auswirken kÃ¶nnte.
        </div>
      </div>

      <div><label>Label 1:</label><input type="text" name="label1" value="stark auffÃ¤llig"></div>
      <div><label>Label 2:</label><input type="text" name="label2" value="auffÃ¤llig"></div>
      <div><label>Label 3:</label><input type="text" name="label3" value="unauffÃ¤llig"></div>
      <div><label>Label 4:</label><input type="text" name="label4" value="besonders unauffÃ¤llig"></div>

      <div><label>Subsplit (%):</label><input type="range" name="subsplit" min="10" max="90" value="50"></div>
      <div><label>Sub Gray Text:</label><input type="text" name="subgray" value="WeiterfÃ¼hrende Fachdiagnostik empfohlen"></div>
      <div><label>Sub Green Text:</label><input type="text" name="subgreen" value="Normbereich"></div>

      <div><label>Colors:</label>
        <input type="color" name="colors" value="#ed1b06">
        <input type="color" name="colors" value="#ff7801">
        <input type="color" name="colors" value="#fcc709">
        <input type="color" name="colors" value="#fff15e">
        <input type="color" name="colors" value="#c1ef4a">
        <input type="color" name="colors" value="#79e607">
      </div>

      <div><label>Ranges (comma-separated):</label>
        <input type="text" name="ranges" value="0-3,4-5,6,7-8,9-10,11">
      </div>
    </fieldset>

    <button type="submit">Anzeigen</button>
  </form>

  <script>
    function formatText(command, value=null) {
      if (command === "increaseFontSize" || command === "decreaseFontSize") {
        document.execCommand("fontSize", false, 4);
        let editor = document.getElementById("assessmentEditor");
        let fonts = editor.querySelectorAll("font[size='4']");
        fonts.forEach(f => {
          f.removeAttribute("size");
          let current = parseInt(f.style.fontSize || "16");
          f.style.fontSize = (command === "increaseFontSize" ? current+2 : current-2) + "px";
        });
      } else {
        document.execCommand(command, false, value);
      }
    }

    document.getElementById("paramForm").addEventListener("submit", function(e){
      e.preventDefault();
      const formData = new FormData(e.target);
      const params = new URLSearchParams();

      // handle multiple colors
      const colorInputs = e.target.querySelectorAll("input[name='colors']");
      const colors = Array.from(colorInputs).map(inp=>inp.value).join(",");
      params.set("colors", colors);

      // editor content as raw HTML
      const assessmentHtml = document.getElementById("assessmentEditor").innerHTML;
      params.set("assessment", assessmentHtml);

      for (const [key, value] of formData.entries()) {
        if (key !== "colors") params.set(key, value);
      }

      window.location.href = "reihenBildung.html?" + params.toString();
    });
  </script>
</body>
</html>
