<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Mensch-Zeichnen</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; display: flex; justify-content: center; }
  .container { width: 1000px; display: flex; flex-direction: column; min-height: 100vh; }

  /* Logo */
  .logo { width: 200px; height: 50px; margin: 0 auto 20px auto; }
  .logo img { max-width: 100%; max-height: 100%; object-fit: contain; }

  /* Header */
  header { display: grid; grid-template-columns: 1fr auto 1fr; align-items: start; margin-bottom: 20px; }
  .header-left { display: flex; flex-direction: column; gap: 2px; }
  .header-left .bold { font-weight: bold; }
  header h1 { text-align: center; color: #f08a00; margin: 0; text-decoration: underline; font-size: 20px; }
  .header-right { text-align: right; display: flex; flex-direction: column; align-items: flex-end; gap: 10px; }
  .header-right .bold { font-weight: bold; }

  /* Bars */
  .status-section { margin-top: 30px; }
  .status-title { text-align: center; font-weight: bold; margin-bottom: 20px; }
  .bar-labels { display: flex; justify-content: space-between; margin: 0 5px 2px 5px; font-size: 13px; }
  .bar-wrapper { margin: 20px 0; position: relative; }
  .bar-line { position: absolute; left: 0; right: 0; height: 1px; background: #000; opacity: 0.9; }
  .bar-line.top { top: -6px; }
  .bar-line.bottom { bottom: -6px; }
  .bar-track { position: relative; height: 26px; border-radius: 6px; overflow: hidden; }
  .knob { position: absolute; top: -10px; width: 34px; height: 34px; border-radius: 50%; background: #fff; border: 3px solid #ccc; box-shadow: 0 2px 6px rgba(0,0,0,0.2); transform: translateX(-50%); display: flex; align-items: center; justify-content: center; font-weight: bold; }
  .combined-end-labels { display: flex; justify-content: space-between; margin-top: 8px; font-weight: bold; }

/* Sub-bar with numbers 1–8 */
.sub-bar { 
  margin-top: 18px; 
  position: relative; 
}

.sub-track { 
  position: relative; 
  height: 26px; 
  border-radius: 6px; 
  overflow: hidden; 
  background: linear-gradient(
    90deg, 
    #f5f5f5 0%, 
    #f5f5f5 70%, 
    #cce5cc 80%, 
    #d5f5d5 100%
  ); 
}

/* Numbers positioned individually */
.sub-ticks { 
  position: absolute; 
  top: 50%; 
  left: 0; 
  right: 0; 
  transform: translateY(-50%); 
  height: 100%; 
  pointer-events: none; 
  font-size: 12px; 
  font-weight: bold; 
  color: #000; 
}

.sub-ticks span {
  position: absolute;
  top: 50%;
  transform: translate(-50%, -50%);
}

/* Adjusted positions for each number (in %) */
.sub-ticks span:nth-child(1) { left: 5%; }     /* 1 */
.sub-ticks span:nth-child(2) { left: 15%; }    /* 2 */
.sub-ticks span:nth-child(3) { left: 30%; }    /* 3 moved closer to 4 */
.sub-ticks span:nth-child(4) { left: 40%; }    /* 4 */
.sub-ticks span:nth-child(5) { left: 50%; }    /* 5 */
.sub-ticks span:nth-child(6) { left: 60%; }    /* 6 */
.sub-ticks span:nth-child(7) { left: 70%; }    /* 7 moved closer to 6 */
.sub-ticks span:nth-child(8) { left: 90%; }   /* 8 */
.sub-ticks span:nth-child(9) { left: 95%; }   /* 8 */


  /* Content images */
  .content-images { margin-top: 40px; display: flex; flex-wrap: wrap; gap: 12px; }
  .content-images img { width: 150px; height: auto; border: 2px solid #ccc; border-radius: 6px; object-fit: cover; }

  .image-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, 74.4px);
    grid-auto-rows: 74.4px;
    justify-content: start;
    gap: 0;
  }

  .image-grid img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    background: #fff;
    margin: 0;
    padding: 0;
    border: none;
  }

  /* Assessment */
  .assessment { max-width: 700px; border: 3px solid #3f3fe0; margin: 30px auto 60px; padding: 18px; color: #2d2dcd; text-align: center; border-radius: 4px; background: #fff; min-height: 120px; }

  /* Footer */
  .footer { margin-top: auto; display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; font-size: 14px; padding-top: 10px; border-top: 1px solid #ccc; }
  .footer div:first-child { text-align: left; }
  .footer div:nth-child(2), .footer div:nth-child(3) { text-align: center; }
  .footer div:last-child { text-align: right; }
</style>
</head>
<body>
<div class="container">

  <!-- HEADER SECTION -->
  <section id="header-section">
    <div class="logo"><img src="logo.png" alt="Logo"></div>

    <header>
      <div class="header-left">
        <div id="userName" class="bold"></div>
        <div><span class="bold">Muttersprache:</span> <span id="lang"></span></div>
        <div>geb.: <span id="birthdate"></span> &nbsp; Alter: <span id="age"></span></div>
        <div>in D/A/CH seit: <span id="since"></span></div>
      </div>

      <h1>MENSCH-ZEICHNEN</h1>

      <div class="header-right">
        <div><span class="bold">Datum:</span> <span id="date"></span></div>
        <div>Teacher: <span id="teacher"></span></div>
      </div>
    </header>

    <div class="status-section">
      <div class="status-title">EINORDNUNG DES (ZEICHEN-)ENTWICKLUNGSALTERS</div>
      <div class="bar-labels">
        <div id="label1"></div>
        <div id="label2"></div>
        <div id="label3"></div>
        <div id="label4"></div>
      </div>
      <div class="bar-wrapper">
        <div class="bar-line top"></div>
        <div class="bar-track" id="barTrack"></div>
        <div class="bar-line bottom"></div>
        <div class="knob" id="knob"></div>
      </div>
  <div class="sub-bar">
  <div class="sub-track"></div>
  <div class="sub-ticks">
    <span>..</span>
    <span>4</span>
    <span>5</span>
    <span>5,6</span>
    <span>6*</span>
    <span>6,6</span>
    <span>7</span>
    <span>7,6</span>
    <span>..</span>
  </div>
</div>

      <div class="combined-end-labels">
        <div id="combinedMin"></div>
        <div id="combinedMax"></div>
      </div>
    </div>
  </section>

  <!-- CONTENT SECTION -->
  <section id="content-section">
    <div class="detail">
      <div class="detail-title"></div>
      <br><br><br>
      <div class="image-grid">
        <img src="MZA 2.png" alt="MZA 2">
        <img src="MZA 2,6.png" alt="MZA 2,6">
        <img src="MZA 3.png" alt="MZA 3">
        <img src="MZA 3,5.png" alt="MZA 3,5">
        <img src="MZA 3,6.png" alt="MZA 3,6">
        <img src="MZA 4.png" alt="MZA 4">
        <img src="MZA 5.png" alt="MZA 5">
        <img src="MZA 6.png" alt="MZA 6">
        <img src="MZA 6_2.png" alt="MZA 6_2">
        <img src="MZA 6,5 A.png" alt="MZA 6,5 A">
        <img src="MZA 6,5 B.png" alt="MZA 6,5 B">
      </div>
      <br><br><br>
    </div>
  </section>

  <!-- FOOTER SECTION -->
  <section id="footer-section">
    <div class="assessment">
      <div style="font-weight:800; margin-bottom:8px;">Beurteilung:</div>
      <div id="assessmentText"></div>
    </div>
    <div class="footer">
      <div id="footerName"></div>
      <div id="footerGeb"></div>
      <div id="footerDate"></div>
      <div id="footerTeacher"></div>
    </div>
  </section>
</div>

<script>
/* --- Parse and config --- */
function parseRanges(rangesStr) {
  return rangesStr.split(",").map(r => {
    if (r.includes("-")) {
      const [start, end] = r.split("-").map(Number);
      return { start, end };
    } else {
      const val = Number(r);
      return { start: val, end: val };
    }
  });
}
const params = new URLSearchParams(window.location.search);
const config = {
  name: params.get("name") || "Vorname Nachname",
  lang: params.get("lang") || "Deutsch",
  birthdate: params.get("birthdate") || "01/09/2019",
  age: params.get("age") || "6;0",
  since: params.get("since") || "01/01/2023",
  date: params.get("date") || "15.09.2025",
  teacher: params.get("teacher") || "Max Mustermann",
  min: params.get("min") ? Number(params.get("min")) : 0,
  max: params.get("max") ? Number(params.get("max")) : 13,
  score: params.get("score") ? Number(params.get("score")) : 0,
  colors: params.get("colors") ? params.get("colors").split(",") : ["#ed1b06","#ff7801","#fcc709","#fff15e","#c1ef4a","#79e607"],
  ranges: params.get("ranges") ? parseRanges(params.get("ranges")) : [{start:0,end:3},{start:4,end:5},{start:6,end:6},{start:7,end:8},{start:9,end:10},{start:11,end:11}],
  assessment: params.get("assessment") || "Die Differenzierungsleistung ist deutlich auffällig.",
  label1: params.get("label1") || "stark auffällig",
  label2: params.get("label2") || "auffällig",
  label3: params.get("label3") || "unauffällig",
  label4: params.get("label4") || "besonders unauffällig"
};
/* --- Build gradient from ranges --- */
function buildGradient(colors, ranges, min, max) {
  if (max === min) return colors[0] || "#ddd";
  let stops = [];
  for (let i = 0; i < ranges.length; i++) {
    const r = ranges[i];
    const color = colors[i % colors.length];
    const startPct = ((r.start - min) / (max - min)) * 100;
    const endPct = ((r.end - min) / (max - min)) * 100;
    const s = Math.max(0, Math.min(100, startPct));
    const e = Math.max(0, Math.min(100, endPct));
    stops.push(`${color} ${s}%`, `${color} ${e}%`);
  }
  return `linear-gradient(90deg, ${stops.join(",")})`;
}
/* --- Fill static content --- */
document.getElementById("userName").textContent = config.name;
document.getElementById("lang").textContent = config.lang;
document.getElementById("birthdate").textContent = config.birthdate;
document.getElementById("age").textContent = config.age;
document.getElementById("since").textContent = config.since;
document.getElementById("date").textContent = config.date;
document.getElementById("teacher").textContent = config.teacher;
document.getElementById("assessmentText").innerHTML = config.assessment;
document.getElementById("label1").textContent = config.label1;
document.getElementById("label2").textContent = config.label2;
document.getElementById("label3").textContent = config.label3;
document.getElementById("label4").textContent = config.label4;
/* --- Footer --- */
document.getElementById("footerName").textContent = config.name;
document.getElementById("footerGeb").textContent = "geb.: " + config.birthdate;
document.getElementById("footerDate").textContent = config.date;
document.getElementById("footerTeacher").textContent = config.teacher;
/* --- Bar gradient --- */
document.getElementById("barTrack").style.background = buildGradient(config.colors, config.ranges, config.min, config.max);
/* --- Knob placement --- */
let pct = 0;
if (config.max !== config.min) {
  pct = ((config.score - config.min) / (config.max - config.min)) * 100;
}
pct = Math.max(0, Math.min(100, pct));
document.getElementById("knob").style.left = pct + "%";
document.getElementById("knob").textContent = config.score;
/* --- Min / Max labels --- */
document.getElementById("combinedMin").textContent = Math.min(config.min, 0);
document.getElementById("combinedMax").textContent = Math.max(config.max, 13);
</script>
</body>
</html>
